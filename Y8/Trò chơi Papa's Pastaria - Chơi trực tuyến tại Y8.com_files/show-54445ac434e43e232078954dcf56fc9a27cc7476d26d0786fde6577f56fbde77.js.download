function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function ItemDiv(domId){this.$container=$(domId),this.$domElt=this.$container.find(".resizable"),this.initialWidth=this.$container.data("item-width"),this.initialHeight=this.$container.data("item-height"),this.supportsResizing=this.$container.data("item-supports-resizing"),this.ratioTolerant=this.$container.data("item-ratio-tolerant"),this.ratio=this.initialWidth/this.initialHeight,this.maximize=1==this.$container.data("maximize"),this.initialFitWidth=null,this.intialFitHeight=null,this.initialFitRatio=null,this.fitInto=function(container,widthOffset,heightOffset){widthOffset=void 0!==widthOffset?widthOffset:0,heightOffset=void 0!==heightOffset?heightOffset:0;var newSize={};return this.supportsResizing?(newSize=this.ratioTolerant?{width:container.currentWidth(),height:container.currentHeight()}:this.ratio>container.currentRatio()?{width:container.currentWidth(),height:container.currentWidth()/this.ratio}:{width:container.currentHeight()*this.ratio,height:container.currentHeight()},newSize.width=newSize.width-widthOffset,newSize.height=newSize.height-heightOffset,this.initFitSize(newSize),this.changeSizeWith(newSize),newSize):void this.initFitSize(newSize)},this.initFitSize=function(fitSize){this.initialFitWidth||(this.initialFitWidth=fitSize.width||this.initialWidth,this.initialFitHeight=fitSize.height||this.initialHeight,this.initialFitRatio=this.initialFitWidth/this.initialFitHeight)},this.changeSizeWith=function(newSize){if(newSize!={}){this.$domElt.each(function(){$(this).width(newSize.width),$(this).height(newSize.height),"mobile"==window.UserAgent.device.type&&($(this).css("max-width",newSize.width),$(this).css("max-height",newSize.height))});var $afgDiv=$("#afgv");if($afgDiv.css(newSize).attr(newSize),$afgDiv.find("embed").css(newSize).attr(newSize),!window.UserAgent.device.type){var $html5ImaDiv=$("#html5-ima-overlay");$html5ImaDiv.css(newSize).attr(newSize),$html5ImaDiv.find("iframe").css(newSize).attr(newSize)}}},this.currentWidth=function(){return this.$domElt.length?this.$domElt.width():this.initialWidth},this.currentHeight=function(){return this.$domElt.length?this.$domElt.height():this.initialHeight}}function ContainerDiv(domElt){this.$domElt=$(domElt),this.initialWidth=this.$domElt.width(),this.initialHeight=this.$domElt.height(),this.intialRatio=this.initialWidth/this.initialHeight,this.currentWidth=function(){return this.$domElt.width()},this.currentHeight=function(){return this.$domElt.height()},this.currentRatio=function(){return this.currentWidth()/this.currentHeight()},this.setHeight=function(newHeight){this.$domElt.height(newHeight)}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}!function(t){var i=t(window);t.fn.visible=function(t,e,o){if(!(this.length<1)){var r=this.length>1?this.eq(0):this,n=r.get(0),f=i.width(),h=i.height(),o=o||"both",l=!0!==e||n.offsetWidth*n.offsetHeight;if("function"==typeof n.getBoundingClientRect){var g=n.getBoundingClientRect(),u=g.top>=0&&g.top<h,s=g.bottom>0&&g.bottom<=h,c=g.left>=0&&g.left<f,a=g.right>0&&g.right<=f,v=t?u||s:u&&s,b=t?c||a:c&&a;if("both"===o)return l&&v&&b;if("vertical"===o)return l&&v;if("horizontal"===o)return l&&b}else{var d=i.scrollTop(),p=d+h,w=i.scrollLeft(),m=w+f,y=r.offset(),z=y.top,B=z+r.height(),C=y.left,R=C+r.width(),j=!0===t?B:z,q=!0===t?z:B,H=!0===t?R:C,L=!0===t?C:R;if("both"===o)return!!l&&p>=q&&j>=d&&m>=L&&H>=w;if("vertical"===o)return!!l&&p>=q&&j>=d;if("horizontal"===o)return!!l&&m>=L&&H>=w}}}}(jQuery),/*!
 * UAParser.js v0.7.21
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright Â© 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */
function(window,undefined){"use strict";var EMPTY="",UNKNOWN="?",FUNC_TYPE="function",UNDEF_TYPE="undefined",OBJ_TYPE="object",STR_TYPE="string",MODEL="model",NAME="name",TYPE="type",VENDOR="vendor",VERSION="version",ARCHITECTURE="architecture",CONSOLE="console",MOBILE="mobile",TABLET="tablet",SMARTTV="smarttv",WEARABLE="wearable",util={extend:function(regexes,extensions){var mergedRegexes={};for(var i in regexes)extensions[i]&&extensions[i].length%2==0?mergedRegexes[i]=extensions[i].concat(regexes[i]):mergedRegexes[i]=regexes[i];return mergedRegexes},has:function(str1,str2){return"string"==typeof str1&&-1!==str2.toLowerCase().indexOf(str1.toLowerCase())},lowerize:function(str){return str.toLowerCase()},major:function(version){return typeof version===STR_TYPE?version.replace(/[^\d\.]/g,"").split(".")[0]:undefined},trim:function(str){return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},mapper={rgx:function(ua,arrays){for(var j,k,p,q,matches,match,i=0;i<arrays.length&&!matches;){var regex=arrays[i],props=arrays[i+1];for(j=k=0;j<regex.length&&!matches;)if(matches=regex[j++].exec(ua))for(p=0;p<props.length;p++)match=matches[++k],q=props[p],typeof q===OBJ_TYPE&&q.length>0?2==q.length?typeof q[1]==FUNC_TYPE?this[q[0]]=q[1].call(this,match):this[q[0]]=q[1]:3==q.length?typeof q[1]!==FUNC_TYPE||q[1].exec&&q[1].test?this[q[0]]=match?match.replace(q[1],q[2]):undefined:this[q[0]]=match?q[1].call(this,match,q[2]):undefined:4==q.length&&(this[q[0]]=match?q[3].call(this,match.replace(q[1],q[2])):undefined):this[q]=match||undefined;i+=2}},str:function(str,map){for(var i in map)if(typeof map[i]===OBJ_TYPE&&map[i].length>0){for(var j=0;j<map[i].length;j++)if(util.has(map[i][j],str))return i===UNKNOWN?undefined:i}else if(util.has(map[i],str))return i===UNKNOWN?undefined:i;return str}},maps={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},regexes={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[NAME,VERSION],[/(opios)[\/\s]+([\w\.]+)/i],[[NAME,"Opera Mini"],VERSION],[/\s(opr)\/([\w\.]+)/i],[[NAME,"Opera"],VERSION],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim)(?:browser)?[\/\s]?([\w\.]*)/i,/(bidubrowser|baidubrowser)[\/\s]?([\w\.]+)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[NAME,VERSION],[/(konqueror)\/([\w\.]+)/i],[[NAME,"Konqueror"],VERSION],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[NAME,"IE"],VERSION],[/(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i],[[NAME,"Edge"],VERSION],[/(yabrowser)\/([\w\.]+)/i],[[NAME,"Yandex"],VERSION],[/(Avast)\/([\w\.]+)/i],[[NAME,"Avast Secure Browser"],VERSION],[/(AVG)\/([\w\.]+)/i],[[NAME,"AVG Secure Browser"],VERSION],[/(puffin)\/([\w\.]+)/i],[[NAME,"Puffin"],VERSION],[/(focus)\/([\w\.]+)/i],[[NAME,"Firefox Focus"],VERSION],[/(opt)\/([\w\.]+)/i],[[NAME,"Opera Touch"],VERSION],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[NAME,"UCBrowser"],VERSION],[/(comodo_dragon)\/([\w\.]+)/i],[[NAME,/_/g," "],VERSION],[/(windowswechat qbcore)\/([\w\.]+)/i],[[NAME,"WeChat(Win) Desktop"],VERSION],[/(micromessenger)\/([\w\.]+)/i],[[NAME,"WeChat"],VERSION],[/(brave)\/([\w\.]+)/i],[[NAME,"Brave"],VERSION],[/(qqbrowserlite)\/([\w\.]+)/i],[NAME,VERSION],[/(QQ)\/([\d\.]+)/i],[NAME,VERSION],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(baiduboxapp)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[NAME,VERSION],[/(MetaSr)[\/\s]?([\w\.]+)/i],[NAME],[/(LBBROWSER)/i],[NAME],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[VERSION,[NAME,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[VERSION,[NAME,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[NAME,VERSION],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[VERSION,[NAME,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[NAME,/(.+)/,"$1 WebView"],VERSION],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[NAME,/(.+(?:g|us))(.+)/,"$1 $2"],VERSION],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[VERSION,[NAME,"Android Browser"]],[/(sailfishbrowser)\/([\w\.]+)/i],[[NAME,"Sailfish Browser"],VERSION],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[NAME,VERSION],[/(dolfin)\/([\w\.]+)/i],[[NAME,"Dolphin"],VERSION],[/(qihu|qhbrowser|qihoobrowser|360browser)/i],[[NAME,"360 Browser"]],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[NAME,"Chrome"],VERSION],[/(coast)\/([\w\.]+)/i],[[NAME,"Opera Coast"],VERSION],[/fxios\/([\w\.-]+)/i],[VERSION,[NAME,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[VERSION,[NAME,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[VERSION,NAME],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[NAME,"GSA"],VERSION],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[NAME,[VERSION,mapper.str,maps.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[NAME,VERSION],[/(navigator|netscape)\/([\w\.-]+)/i],[[NAME,"Netscape"],VERSION],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[NAME,VERSION]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[ARCHITECTURE,"amd64"]],[/(ia32(?=;))/i],[[ARCHITECTURE,util.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[ARCHITECTURE,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[ARCHITECTURE,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[ARCHITECTURE,/ower/,"",util.lowerize]],[/(sun4\w)[;\)]/i],[[ARCHITECTURE,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[ARCHITECTURE,util.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[MODEL,VENDOR,[TYPE,TABLET]],[/applecoremedia\/[\w\.]+ \((ipad)/],[MODEL,[VENDOR,"Apple"],[TYPE,TABLET]],[/(apple\s{0,1}tv)/i],[[MODEL,"Apple TV"],[VENDOR,"Apple"],[TYPE,SMARTTV]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[VENDOR,MODEL,[TYPE,TABLET]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[MODEL,mapper.str,maps.device.amazon.model],[VENDOR,"Amazon"],[TYPE,MOBILE]],[/android.+aft([bms])\sbuild/i],[MODEL,[VENDOR,"Amazon"],[TYPE,SMARTTV]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[MODEL,VENDOR,[TYPE,MOBILE]],[/\((ip[honed|\s\w*]+);/i],[MODEL,[VENDOR,"Apple"],[TYPE,MOBILE]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/\(bb10;\s(\w+)/i],[MODEL,[VENDOR,"BlackBerry"],[TYPE,MOBILE]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[MODEL,[VENDOR,"Asus"],[TYPE,TABLET]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[VENDOR,"Sony"],[MODEL,"Xperia Tablet"],[TYPE,TABLET]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[MODEL,[VENDOR,"Sony"],[TYPE,MOBILE]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[VENDOR,MODEL,[TYPE,CONSOLE]],[/android.+;\s(shield)\sbuild/i],[MODEL,[VENDOR,"Nvidia"],[TYPE,CONSOLE]],[/(playstation\s[34portablevi]+)/i],[MODEL,[VENDOR,"Sony"],[TYPE,CONSOLE]],[/(sprint\s(\w+))/i],[[VENDOR,mapper.str,maps.device.sprint.vendor],[MODEL,mapper.str,maps.device.sprint.model],[TYPE,MOBILE]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[VENDOR,[MODEL,/_/g," "],[TYPE,MOBILE]],[/(nexus\s9)/i],[MODEL,[VENDOR,"HTC"],[TYPE,TABLET]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p|vog-l29|ane-lx1|eml-l29|ele-l29)/i],[MODEL,[VENDOR,"Huawei"],[TYPE,MOBILE]],[/android.+(bah2?-a?[lw]\d{2})/i],[MODEL,[VENDOR,"Huawei"],[TYPE,TABLET]],[/(microsoft);\s(lumia[\s\w]+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[MODEL,[VENDOR,"Microsoft"],[TYPE,CONSOLE]],[/(kin\.[onetw]{3})/i],[[MODEL,/\./g," "],[VENDOR,"Microsoft"],[TYPE,MOBILE]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[MODEL,[VENDOR,"Motorola"],[TYPE,MOBILE]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[MODEL,[VENDOR,"Motorola"],[TYPE,TABLET]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[VENDOR,util.trim],[MODEL,util.trim],[TYPE,SMARTTV]],[/hbbtv.+maple;(\d+)/i],[[MODEL,/^/,"SmartTV"],[VENDOR,"Samsung"],[TYPE,SMARTTV]],[/\(dtv[\);].+(aquos)/i],[MODEL,[VENDOR,"Sharp"],[TYPE,SMARTTV]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,TABLET]],[/smart-tv.+(samsung)/i],[VENDOR,[TYPE,SMARTTV],MODEL],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[VENDOR,"Samsung"],MODEL,[TYPE,MOBILE]],[/sie-(\w*)/i],[MODEL,[VENDOR,"Siemens"],[TYPE,MOBILE]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[VENDOR,"Nokia"],MODEL,[TYPE,MOBILE]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[MODEL,[VENDOR,"Acer"],[TYPE,TABLET]],[/android.+([vl]k\-?\d{3})\s+build/i],[MODEL,[VENDOR,"LG"],[TYPE,TABLET]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[VENDOR,"LG"],MODEL,[TYPE,TABLET]],[/(lg) netcast\.tv/i],[VENDOR,MODEL,[TYPE,SMARTTV]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[MODEL,[VENDOR,"LG"],[TYPE,MOBILE]],[/(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[MODEL,[VENDOR,"Lenovo"],[TYPE,TABLET]],[/(lenovo)[_\s-]?([\w-]+)/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/linux;.+((jolla));/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/((pebble))app\/[\d\.]+\s/i],[VENDOR,MODEL,[TYPE,WEARABLE]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[VENDOR,MODEL,[TYPE,MOBILE]],[/crkey/i],[[MODEL,"Chromecast"],[VENDOR,"Google"],[TYPE,SMARTTV]],[/android.+;\s(glass)\s\d/i],[MODEL,[VENDOR,"Google"],[TYPE,WEARABLE]],[/android.+;\s(pixel c)[\s)]/i],[MODEL,[VENDOR,"Google"],[TYPE,TABLET]],[/android.+;\s(pixel( [23])?( xl)?)[\s)]/i],[MODEL,[VENDOR,"Google"],[TYPE,MOBILE]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,MOBILE]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[MODEL,/_/g," "],[VENDOR,"Xiaomi"],[TYPE,TABLET]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[MODEL,[VENDOR,"Meizu"],[TYPE,MOBILE]],[/(mz)-([\w-]{2,})/i],[[VENDOR,"Meizu"],MODEL,[TYPE,MOBILE]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})[\s)]/i],[MODEL,[VENDOR,"OnePlus"],[TYPE,MOBILE]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[MODEL,[VENDOR,"RCA"],[TYPE,TABLET]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[MODEL,[VENDOR,"Dell"],[TYPE,TABLET]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[MODEL,[VENDOR,"Verizon"],[TYPE,TABLET]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[VENDOR,"Barnes & Noble"],MODEL,[TYPE,TABLET]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[MODEL,[VENDOR,"NuVision"],[TYPE,TABLET]],[/android.+;\s(k88)\sbuild/i],[MODEL,[VENDOR,"ZTE"],[TYPE,TABLET]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[MODEL,[VENDOR,"Swiss"],[TYPE,MOBILE]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[MODEL,[VENDOR,"Swiss"],[TYPE,TABLET]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[MODEL,[VENDOR,"Zeki"],[TYPE,TABLET]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[VENDOR,"Dragon Touch"],MODEL,[TYPE,TABLET]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[MODEL,[VENDOR,"Insignia"],[TYPE,TABLET]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[MODEL,[VENDOR,"NextBook"],[TYPE,TABLET]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[VENDOR,"Voice"],MODEL,[TYPE,MOBILE]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[VENDOR,"LvTel"],MODEL,[TYPE,MOBILE]],[/android.+;\s(PH-1)\s/i],[MODEL,[VENDOR,"Essential"],[TYPE,MOBILE]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[MODEL,[VENDOR,"Envizen"],[TYPE,TABLET]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[MODEL,[VENDOR,"MachSpeed"],[TYPE,TABLET]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[MODEL,[VENDOR,"Rotor"],[TYPE,TABLET]],[/android.+(KS(.+))\s+build/i],[MODEL,[VENDOR,"Amazon"],[TYPE,TABLET]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[VENDOR,MODEL,[TYPE,TABLET]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[TYPE,util.lowerize],VENDOR,MODEL],[/[\s\/\(](smart-?tv)[;\)]/i],[[TYPE,SMARTTV]],[/(android[\w\.\s\-]{0,9});.+build/i],[MODEL,[VENDOR,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[VERSION,[NAME,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[VERSION,[NAME,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[NAME,VERSION],[/rv\:([\w\.]{1,9}).+(gecko)/i],[VERSION,NAME]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[NAME,VERSION],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[NAME,[VERSION,mapper.str,maps.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[NAME,"Windows"],[VERSION,mapper.str,maps.os.windows.version]],[/\((bb)(10);/i],[[NAME,"BlackBerry"],VERSION],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen|kaios)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i],[NAME,VERSION],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[NAME,"Symbian"],VERSION],[/\((series40);/i],[NAME],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[NAME,"Firefox OS"],VERSION],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[NAME,VERSION],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[NAME,"Chromium OS"],VERSION],[/(sunos)\s?([\w\.\d]*)/i],[[NAME,"Solaris"],VERSION],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[NAME,VERSION],[/(haiku)\s(\w+)/i],[NAME,VERSION],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[VERSION,/_/g,"."],[NAME,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[NAME,"Mac OS"],[VERSION,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[NAME,VERSION]]},UAParser=function(uastring,extensions){if("object"==typeof uastring&&(extensions=uastring,uastring=undefined),!(this instanceof UAParser))return new UAParser(uastring,extensions).getResult();var ua=uastring||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:EMPTY),rgxmap=extensions?util.extend(regexes,extensions):regexes;return this.getBrowser=function(){var browser={name:undefined,version:undefined};return mapper.rgx.call(browser,ua,rgxmap.browser),browser.major=util.major(browser.version),browser},this.getCPU=function(){var cpu={architecture:undefined};return mapper.rgx.call(cpu,ua,rgxmap.cpu),cpu},this.getDevice=function(){var device={vendor:undefined,model:undefined,type:undefined};return mapper.rgx.call(device,ua,rgxmap.device),device},this.getEngine=function(){var engine={name:undefined,version:undefined};return mapper.rgx.call(engine,ua,rgxmap.engine),engine},this.getOS=function(){var os={name:undefined,version:undefined};return mapper.rgx.call(os,ua,rgxmap.os),os},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return ua},this.setUA=function(uastring){return ua=uastring,this},this};UAParser.VERSION="0.7.21",UAParser.BROWSER={NAME:NAME,MAJOR:"major",VERSION:VERSION},UAParser.CPU={ARCHITECTURE:ARCHITECTURE},UAParser.DEVICE={MODEL:MODEL,VENDOR:VENDOR,TYPE:TYPE,CONSOLE:CONSOLE,MOBILE:MOBILE,SMARTTV:SMARTTV,TABLET:TABLET,WEARABLE:WEARABLE,EMBEDDED:"embedded"},UAParser.ENGINE={NAME:NAME,VERSION:VERSION},UAParser.OS={NAME:NAME,VERSION:VERSION},typeof exports!==UNDEF_TYPE?(typeof module!==UNDEF_TYPE&&module.exports&&(exports=module.exports=UAParser),exports.UAParser=UAParser):"function"==typeof define&&define.amd?define(function(){return UAParser}):window&&(window.UAParser=UAParser);var $=window&&(window.jQuery||window.Zepto);if($&&!$.ua){var parser=new UAParser;$.ua=parser.getResult(),$.ua.get=function(){return parser.getUA()},$.ua.set=function(uastring){parser.setUA(uastring);var result=parser.getResult();for(var prop in result)$.ua[prop]=result[prop]}}}("object"==typeof window?window:this),window.UserAgent=function(){return UAParser()}(),window.Html5Ima=function(){function _bind(thisObj,fn){return function(){fn.apply(thisObj,arguments)}}var Html5Ima=function(config){this.adTagUrl=config.adTagUrl,this.overlayContainer=config.overlayContainer,this.loadingContainer=config.loadingContainer,this.container=config.container,this.adsController=new google.outstream.AdsController(this.container[0],_bind(this,this.onAdLoaded),_bind(this,this.onAdDone))};return Html5Ima.prototype.load=function(){this.overlayContainer.css("display","block"),this.requestAds()},Html5Ima.prototype.onAdLoaded=function(){this.loadingContainer.hide(),this.adsController.showAd();var _this=this;delay(function(){_this.overlayContainer.find("#adContainer div div:first-child").css("display","inline")},1e3)},Html5Ima.prototype.onAdDone=function(){this.overlayContainer.hide(),$(document).triggerHandler("adDisplayDone")},Html5Ima.prototype.requestAds=function(){this.adsController.initialize(),this.adsController.requestAds(this.adTagUrl)},Html5Ima.prototype.resizeAdsController=function(){this.adsController.resize(this.container.width(),this.container.height())},Html5Ima}(),window.Html5ImaDesktop=function(){var Html5ImaDesktop=function(config){Html5Ima.call(this,config)};return Object.create&&(Html5ImaDesktop.prototype=Object.create(Html5Ima.prototype)),Html5ImaDesktop}(),window.Html5ImaMobile=function(){var Html5ImaMobile=function(config){Html5Ima.call(this,config)};return Object.create&&(Html5ImaMobile.prototype=Object.create(Html5Ima.prototype)),Html5ImaMobile.prototype.load=function(){this.overlayContainer.removeAttr("style"),this.resetAdContainerSize(),this.resizeListener(),Html5Ima.prototype.load.call(this)},Html5ImaMobile.prototype.resetAdContainerSize=function(){this.container.css("width",this.overlayContainer.css("width")),this.container.css("height",this.overlayContainer.css("height"))},Html5ImaMobile.prototype.resizeListener=function(){var _this=this;$(window).on("resize",function(){delay(function(){window.mobileView.resize(),_this.resetAdContainerSize(),_this.resizeAdsController()},500)})},Html5ImaMobile}();var version=parseInt(window.UserAgent.browser.major,10),Html5ImaCompatibility={desktop:function(){var browserName=window.UserAgent.browser.name;return"Chrome"==browserName||"Opera"==browserName||"Edge"==browserName||"Firefox"==browserName&&version>=4||"Safari"==browserName&&version>=5||"IE"==browserName&&version>=11},mobile:function(){var browserName=window.UserAgent.browser.name;return"Chrome"==browserName||"Opera"==browserName||"Mobile Safari"==browserName||"Android Browser"==browserName&&version>=2.3||"Safari"==browserName&&version>=6}},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Video=function(){function Video(container){_classCallCheck(this,Video),this.$container=$(container),this.initialBottomPosition=this.$container.position().top+this.$container.outerHeight(!0),this.fakeContainerClassName="fake-container",this.fakeContainer=$("<div>").addClass(this.fakeContainerClassName),this.checkPosition(),this.onScroll()}return _createClass(Video,[{key:"checkPosition",value:function(){if($(window).scrollTop()>this.initialBottomPosition)return 0==$("."+this.fakeContainerClassName).length&&this.$container.before(this.fakeContainer),this.moveToRightCorner();1==$("."+this.fakeContainerClassName).length&&this.fakeContainer.remove(),this.moveToOriginalPosition()}},{key:"moveToRightCorner",value:function(){this.$container.addClass("player-right-corner")}},{key:"moveToOriginalPosition",value:function(){this.$container.removeClass("player-right-corner")}},{key:"onScroll",value:function(){var _this=this,didScroll=!1;$(window).scroll(function(){didScroll=!0}),setInterval(function(){didScroll&&(didScroll=!1,_this.checkPosition())},300)}}]),Video}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ItemLoader=function(){function ItemLoader(){_classCallCheck(this,ItemLoader),$(".item-spot").hide(),this.$container=$(".item-direct-container"),this.$container.css("display","none"),$(document).one("adDisplayDone",this.load.bind(this))}return _createClass(ItemLoader,[{key:"load",value:function(){$("#request-play-game").size()>0?$("#play-game").click(this.manageClick.bind(this)):this.display()}},{key:"manageClick",value:function(){this.insertContent(),this.display()}},{key:"insertContent",value:function(){$("#request-play-game").hide(),$(".item-spot").replaceWith($(".item-container").data("asyncContent")),this.$container=$(".item-direct-container")}},{key:"display",value:function(){this.$container.css("display","block")}}]),ItemLoader}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},SwfLoader=function(_ItemLoader){function SwfLoader(){_classCallCheck(this,SwfLoader),_get(Object.getPrototypeOf(SwfLoader.prototype),"constructor",this).apply(this,arguments)}return _inherits(SwfLoader,_ItemLoader),SwfLoader}(ItemLoader),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},Html5Loader=function(_ItemLoader){function Html5Loader(){_classCallCheck(this,Html5Loader),_get(Object.getPrototypeOf(Html5Loader.prototype),"constructor",this).call(this),this.url=$("#unity_webgl_game_url").attr("href")}return _inherits(Html5Loader,_ItemLoader),_createClass(Html5Loader,[{key:"display",value:function(){this.$container.attr("src",this.$container.data("src")),_get(Object.getPrototypeOf(Html5Loader.prototype),"display",this).call(this)}}]),Html5Loader}(ItemLoader),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},UnityLoader=function(_ItemLoader){function UnityLoader(){_classCallCheck(this,UnityLoader),_get(Object.getPrototypeOf(UnityLoader.prototype),"constructor",this).apply(this,arguments)}return _inherits(UnityLoader,_ItemLoader),_createClass(UnityLoader,[{key:"load",value:function(){(new Html5Loader).load(),_get(Object.getPrototypeOf(UnityLoader.prototype),"load",this).call(this)}}]),UnityLoader}(ItemLoader),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),AdManagerConfig=function(){function AdManagerConfig(){_classCallCheck(this,AdManagerConfig),this.adBlockDetected=window.adBlockDetected===undefined}return _createClass(AdManagerConfig,[{key:"key",get:function(){return this.$el.data("key")}},{key:"value",get:function(){return this.$el.data("value")}},{key:"showAds",get:function(){return!this.adBlockDetected&&this.$el.data("show-ads")}},{key:"revenueShare",get:function(){return this.$el.data("revenue-share")}}]),AdManagerConfig}(),DisplayAdManagerConfig=function(_AdManagerConfig){function DisplayAdManagerConfig(){_classCallCheck(this,DisplayAdManagerConfig),_get(Object.getPrototypeOf(DisplayAdManagerConfig.prototype),"constructor",this).call(this),this.$el=$("#display-ad-manager")}return _inherits(DisplayAdManagerConfig,_AdManagerConfig),_createClass(DisplayAdManagerConfig,[{key:"slotRightUp",get:function(){return"/83578953/Y8_Right_of_games_1"}},{key:"slotRightDown",get:function(){return"/83578953/Y8_Right_of_games_2"}},{key:"slotAbove",get:function(){return"/83578953/Y8_Top_of_Games"}}]),DisplayAdManagerConfig}(AdManagerConfig),VideoAdManagerConfig=function(_AdManagerConfig2){function VideoAdManagerConfig(){_classCallCheck(this,VideoAdManagerConfig),_get(Object.getPrototypeOf(VideoAdManagerConfig.prototype),"constructor",this).call(this),this.$el=$("#video-ad-manager")}return _inherits(VideoAdManagerConfig,_AdManagerConfig2),_createClass(VideoAdManagerConfig,[{key:"videoTag",get:function(){return this.$el.data("video-tag")}},{key:"custParams",get:function(){return"cust_params="+this.key+"%3D"+this.value}},{key:"descriptionUrl",get:function(){return encodeURIComponent(window.location.href)}},{key:"url",get:function(){return[this.videoTag,this.custParams,this.descriptionUrl].join("&")}}]),VideoAdManagerConfig}(AdManagerConfig),MobileVideoAdManagerConfig=function(_VideoAdManagerConfig){function MobileVideoAdManagerConfig(){_classCallCheck(this,MobileVideoAdManagerConfig),_get(Object.getPrototypeOf(MobileVideoAdManagerConfig.prototype),"constructor",this).apply(this,arguments)}return _inherits(MobileVideoAdManagerConfig,_VideoAdManagerConfig),_createClass(MobileVideoAdManagerConfig,[{key:"videoTag",get:function(){return this.$el.data("mobile-video-tag")}}]),MobileVideoAdManagerConfig}(VideoAdManagerConfig),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),VideoLoader=function(){function VideoLoader(){_classCallCheck(this,VideoLoader),this.$container=$("#player"),this.adManagerConfig=new VideoAdManagerConfig}return _createClass(VideoLoader,[{key:"load",value:function(){var playCountRegistered=!1;flowplayer("#player",this.options()).on("load",function(){new Video("#player")}).on("resume",function(){if(!playCountRegistered){var itemSlug=$("#item_slug").data("item-slug");$.post("/tracking/video_play_count",{item_slug:itemSlug}),playCountRegistered=!0}}).on("finish",function(e,api){api.unload(),$(document).trigger("playNextVideo")})}},{key:"options",value:function(){var options={key:"$483119889963668,$118640622092553",hlsQualities:!0,autoplay:!1,hlsjs:{maxMaxBufferLength:10,startLevel:-1},clip:{sources:[{type:"application/x-mpegurl",src:this.$container.data("src")}]}};return this.adManagerConfig.showAds&&(options.ima={ads:[{time:0,adTag:this.adManagerConfig.url}]}),options}}]),VideoLoader}(),HeaderBidding={prebidTimeout:1300,failsafeTimeout:3e3,initAdserver:function(){window.pbjs.initAdserverSet||(window.pbjs.initAdserverSet=!0,window.googletag.cmd.push(function(){window.pbjs.que.push(function(){window.pbjs.setTargetingForGPTAsync(),window.googletag.pubads().refresh(HeaderBidding.definedSlots.pbjs)})}))},init:function(key,value){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[],window.pbjs=window.pbjs||{},window.pbjs.que=window.pbjs.que||[],window.idhb=window.idhb||{},window.idhb.que=window.idhb.que||[],window.googletag.cmd.push(function(){window.googletag.pubads().disableInitialLoad()}),window.pbjs.que.push(function(){window.pbjs.bidderSettings={districtm:{bidCpmAdjustment:function(bidCpm){return.85*bidCpm}}},window.pbjs.setConfig({priceGranularity:HeaderBidding.customConfigObject,timeoutBuffer:300,
bidderTimeout:HeaderBidding.prebidTimeout,bidderSequence:"random",enableSendAllBids:!0,userSync:{syncsPerBidder:50,filterSettings:{iframe:{bidders:"*",filter:"include"}}}}),setTimeout(HeaderBidding.initAdserver,HeaderBidding.failsafeTimeout),window.pbjs.que.push(function(){window.pbjs.addAdUnits(HeaderBidding.allPrebidAdUnits)}),window.googletag.cmd.push(function(){HeaderBidding.definedSlots.pbjs.push(window.googletag.defineSlot("/83578953/Y8_Top_of_Games",[[728,90],[468,60]],"Y8_Top_of_Games").setTargeting(""+key,""+value).addService(window.googletag.pubads()),window.googletag.defineSlot("/83578953/Y8_Right_of_games_1",[[300,250],[250,250]],"Y8_Right_of_games_1").setTargeting(""+key,""+value).addService(window.googletag.pubads()),window.googletag.defineSlot("/83578953/Y8_Right_of_games_2",[[300,250],[250,250]],"Y8_Right_of_games_2").setTargeting(""+key,""+value).addService(window.googletag.pubads())),window.googletag.pubads().enableSingleRequest(),window.googletag.enableServices(),HeaderBidding.requestHeaderBidding()})})},requestHeaderBidding:function(){window.pbjs.que.push(function(){window.pbjs.requestBids({bidsBackHandler:HeaderBidding.initAdserver,timeout:HeaderBidding.prebidTimeout})}),window.idhb.que.push(function(){var slotIds=HeaderBidding.definedSlots.idhb.map(function(slot){return slot.getSlotElementId()});window.idhb.requestAds({slotIds:slotIds,callback:function(){window.googletag.cmd.push(function(){window.googletag.pubads().refresh(HeaderBidding.definedSlots[idhb])})}})})},definedSlots:{pbjs:[],idhb:[]},isDesktop:function(){return window.UserAgent?!window.UserAgent.device.type:window.innerWidth>1200},customConfigObject:{buckets:[{precision:2,min:.01,max:100,increment:.01},{precision:2,min:100,max:1e3,increment:1}]},allPrebidAdUnits:[{code:"Y8_Top_of_Games",mediaTypes:{banner:{sizes:[[728,90]]}},bids:[{bidder:"districtmDMX",params:{dmxid:"525625",memberid:"102001"}},{bidder:"districtm",params:{placementId:"19328759"}},{bidder:"oftmedia",params:{placementId:"18716602"}},{bidder:"triplelift",params:{inventoryCode:"61493"}},{bidder:"ix",params:{siteId:"516138",size:[728,90]}},{bidder:"sharethrough",params:{pkey:"9VJWNM7VnL97YRPvfEcpawcV"}},{bidder:"improvedigital",params:{placementId:22516011}},{bidder:"onetag",params:{pubId:"72d84e044a39576"}},{bidder:"appnexus",params:{placementId:"21851004"}},{bidder:"adform",params:{mid:928579}},{bidder:"smartadserver",params:{siteId:386776,pageId:1334867,formatId:85671}},{bidder:"openx",params:{delDomain:"adsparc-d.openx.net",unit:"544107570"}},{bidder:"emx_digital",params:{tagid:"150151"}},{bidder:"rhythmone",params:{placementId:"216840"}},{bidder:"grid",params:{uid:"97828"}}]},{code:"Y8_Right_of_games_1",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"districtmDMX",params:{dmxid:"525626",memberid:"102001"}},{bidder:"districtm",params:{placementId:"19328760"}},{bidder:"oftmedia",params:{placementId:"18716602"}},{bidder:"triplelift",params:{inventoryCode:"61495"}},{bidder:"ix",params:{siteId:"516139",size:[300,250]}},{bidder:"sharethrough",params:{pkey:"Mt7sgDa9dUTpZA4Ccc8pKGhu"}},{bidder:"improvedigital",params:{placementId:22516012}},{bidder:"onetag",params:{pubId:"72d84e044a39576"}},{bidder:"appnexus",params:{placementId:"21851005"}},{bidder:"adform",params:{mid:928582}},{bidder:"smartadserver",params:{siteId:386776,pageId:1334864,formatId:85162}},{bidder:"openx",params:{delDomain:"adsparc-d.openx.net",unit:"544107571"}},{bidder:"emx_digital",params:{tagid:"150152"}},{bidder:"rhythmone",params:{placementId:"216840"}},{bidder:"grid",params:{uid:"97827"}}]},{code:"Y8_Right_of_games_2",mediaTypes:{banner:{sizes:[[300,250]]}},bids:[{bidder:"districtmDMX",params:{dmxid:"525627",memberid:"102001"}},{bidder:"districtm",params:{placementId:"19328761"}},{bidder:"oftmedia",params:{placementId:"18716602"}},{bidder:"triplelift",params:{inventoryCode:"61498"}},{bidder:"ix",params:{siteId:"516140",size:[300,250]}},{bidder:"sharethrough",params:{pkey:"Um88RDejruTHzmaksR2Jc31y"}},{bidder:"improvedigital",params:{placementId:22516013}},{bidder:"onetag",params:{pubId:"72d84e044a39576"}},{bidder:"appnexus",params:{placementId:"21851005"}},{bidder:"adform",params:{mid:928592}},{bidder:"smartadserver",params:{siteId:386776,pageId:1334862,formatId:85162}},{bidder:"openx",params:{delDomain:"adsparc-d.openx.net",unit:"544107572"}},{bidder:"emx_digital",params:{tagid:"150153"}},{bidder:"rhythmone",params:{placementId:"216840"}},{bidder:"grid",params:{uid:"97825"}}]}]},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),DisplayAdManager=function(){function DisplayAdManager(){_classCallCheck(this,DisplayAdManager),this.adManagerConfig=new DisplayAdManagerConfig}return _createClass(DisplayAdManager,[{key:"load",value:function(){this.enabled&&HeaderBidding.isDesktop()&&HeaderBidding.init(this.key,this.value)}},{key:"key",get:function(){return this.adManagerConfig.key}},{key:"value",get:function(){return this.adManagerConfig.value}},{key:"enabled",get:function(){return this.adManagerConfig.showAds}}]),DisplayAdManager}();!function(ads){"use strict";function get(){return Cookies.get(cookieName)}var cookieName="AFGV";ads.cookieTimer={set:function(){var date=new Date;date.setTime(date.getTime()+18e5),Cookies.set(cookieName,!0,{expires:date,path:"/"})},get:get,hasExpired:function(){return!get()}}}(window.ads=window.ads||{},jQuery),function(ads,$,Html5ImaMobile,Html5ImaDesktop){"use strict";function selectLoader(){return"mobile"==window.UserAgent.device.type?new HtmlIma.mobile:new HtmlIma.desktop}var HtmlIma=function(){function selectConfig(){return"mobile"==window.UserAgent.device.type?new MobileVideoAdManagerConfig:new VideoAdManagerConfig}function loaderInstance(loaderClass){var container=$("#html5-ima");return new loaderClass({overlayContainer:$("#html5-ima-overlay"),loadingContainer:$("#html5-ima-loading"),container:container,adTagUrl:selectConfig().url})}return{mobile:function(){return loaderInstance(Html5ImaMobile)},desktop:function(){return loaderInstance(Html5ImaDesktop)}}}();ads.preloader=function(){selectLoader().load(),ads.cookieTimer.set()}}(window.ads=window.ads||{},jQuery,Html5ImaMobile,Html5ImaDesktop);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),VideoAdManager=function(){function VideoAdManager(){_classCallCheck(this,VideoAdManager),this.adManagerConfig=new VideoAdManagerConfig}return _createClass(VideoAdManager,[{key:"load",value:function(){return this.enabled()?ads.preloader():$(document).triggerHandler("adDisplayDone")}},{key:"enabled",value:function(){return!!this.adManagerConfig.revenueShare&&(this.adManagerConfig.showAds&&this.compatibleDevice())}},{key:"compatibleDevice",value:function(){return"mobile"==window.UserAgent.device.type?Html5ImaCompatibility.mobile():Html5ImaCompatibility.desktop()}}]),VideoAdManager}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_get=function(_x,_x2,_x3){for(var _again=!0;_again;){var object=_x,property=_x2,receiver=_x3;_again=!1,null===object&&(object=Function.prototype);var desc=Object.getOwnPropertyDescriptor(object,property);if(desc!==undefined){if("value"in desc)return desc.value;var getter=desc.get;return getter===undefined?undefined:getter.call(receiver)}var parent=Object.getPrototypeOf(object);if(null===parent)return undefined;_x=parent,_x2=property,_x3=receiver,_again=!0,desc=parent=undefined}},MobileVideoAdManager=function(_VideoAdManager){function MobileVideoAdManager(){_classCallCheck(this,MobileVideoAdManager),_get(Object.getPrototypeOf(MobileVideoAdManager.prototype),"constructor",this).apply(this,arguments)}return _inherits(MobileVideoAdManager,_VideoAdManager),_createClass(MobileVideoAdManager,[{key:"enabled",value:function(){return this.adManagerConfig.showAds&&this.compatibleDevice()}}]),MobileVideoAdManager}(VideoAdManager),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),ItemAdLoader=function(){function ItemAdLoader(){_classCallCheck(this,ItemAdLoader)}return _createClass(ItemAdLoader,[{key:"init",value:function(){"VideoLoader"===$("#item-ad-loader").data("loader")&&(new VideoLoader).load(),"Html5Loader"===$("#item-ad-loader").data("loader")&&new Html5Loader,"SwfLoader"===$("#item-ad-loader").data("loader")&&new SwfLoader,"UnityLoader"===$("#item-ad-loader").data("loader")&&new UnityLoader}},{key:"manageDisplayAd",value:function(){"y8"===$('meta[name="X-Current-Skin-Shortname"]').attr("content")&&(new DisplayAdManager).load()}},{key:"manageVideoAd",value:function(){var item=$("#item-ad-loader"),loader=item.data("loader"),mobile="mobile"===item.data("device");"VideoLoader"!==loader&&(mobile?(new MobileVideoAdManager).load():(new VideoAdManager).load())}}]),ItemAdLoader}(),ItemEmbed={init:function(){$("body").on("click",".item-embed-toggle",this.popUp.bind(this)),$("body").on("click",".item-embed-popup .btn-close",this.hideAll.bind(this)),$("body").on("click",".btn-copy-code",this.copyCode.bind(this))},popUp:function(e){e.stopPropagation(),e.preventDefault();var itemId=$(e.currentTarget).data("item-id");$popup=$("#item-embed-popup-"+itemId),$popup.toggle(),this.selectEmbedCode(e)},hideAll:function(e){e.preventDefault(),$(".item-embed-popup").hide()},selectEmbedCode:function(e){$(e.target).parent().find("textarea").select()},copyCode:function(e){e.preventDefault()}},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),Favorite=function(){function Favorite(){_classCallCheck(this,Favorite),this.processing=!1}return _createClass(Favorite,[{key:"add",value:function(url,itemId,cb){this.execute(url,{item_id:itemId},"POST",cb)}},{key:"remove",value:function(url,itemId,cb){this.execute(url,null,"DELETE",cb)}},{key:"heart",value:function(url,itemId,cb){this.execute(url,{item_id:itemId},"POST",cb)}},{key:"unheart",value:function(url,itemId,cb){this.execute(url,null,"DELETE",cb)}},{key:"execute",value:function(url,data,type,cb){var _this=this;this.request=$.ajax({type:type,url:url,data:data,beforeSend:function(){_this.processing=!_this.processing},complete:function(){_this.processing=!_this.processing},error:function(data){403==data.status&&ID.register()},success:function(data){cb(data)}})}}]),Favorite}();window.Favorite=Favorite;var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();require("features/favorite");var ItemFavorite=function(){function ItemFavorite(){_classCallCheck(this,ItemFavorite),this.favorite=new Favorite,this.userInfo=new UserInfo}return _createClass(ItemFavorite,[{key:"bindClickActions",value:function(){var _this=this;$(".favorites_add, .favorites_remove, .hearted_add, .hearted_remove").on("click",function(e){return e.preventDefault(),_this.$currentActionContainer=$(e.currentTarget),_this.currentAction=_this.$currentActionContainer.data("action"),_this.$container=_this.$currentActionContainer.closest(".fav-part"),_this.$add=_this.$container.find(".favorites_add"),_this.$remove=_this.$container.find(".favorites_remove"),_this.$heart=_this.$container.find(".hearted_add"),_this.$unheart=_this.$container.find(".hearted_remove"),_this.$heartMessage=$(".heart-message"),_this.perform(),!1})}},{key:"perform",value:function(){if(this.favorite.processing)return!1;this.favorite[this.currentAction](this.getUrl(this.$currentActionContainer),this.getItemId(this.$currentActionContainer),$.proxy(this[this.currentAction],this))}},{key:"add",value:function(data){this.$add.hide(),this.$remove.show(),this.userInfo.canHeart()?(this.$heart.addClass("show"),this.$unheart.removeClass("visible"),this.$heartMessage.addClass("animation"),setTimeout(function(){return $(".heart-message").removeClass("animation")},7e3)):(this.$heartMessage.removeClass("show"),this.$unheart.removeClass("visible")),$(document).triggerHandler("favorites-count",data.user_favorites_count)}},{key:"remove",value:function(data){this.$add.show(),this.$remove.hide(),this.$heart.show().removeClass("show").removeClass("visible"),this.$unheart.show().removeClass("visible").removeClass("show"),this.$heartMessage.removeClass("animation"),$(document).triggerHandler("favorites-count",data.user_favorites_count),$(document).triggerHandler("hearts-count",data.user_hearts_count)}},{key:"heart",value:function(data){this.$heart.hide().removeClass("visible").removeClass("show"),this.$unheart.addClass("visible"),$(document).triggerHandler("hearts-count",data.user_hearts_count)}},{key:"unheart",value:function(data){this.$heart.addClass("visible"),this.$unheart.hide().removeClass("visible").removeClass("show"),$(document).triggerHandler("hearts-count",data.user_hearts_count)}},{key:"getUrl",value:function(item){return item.data("url")}},{key:"getItemId",value:function(item){return item.data("item-id")}}]),ItemFavorite}();window.ItemFavorite=ItemFavorite;var ItemMaximizer={init:function(itemView){this.itemView=itemView,this.itemDiv=itemView.itemDiv,this.containerDiv=itemView.containerDiv,$("#maximize-button").click(this.maximizeItemSize.bind(this))},renderMaximizedItemOverlay:function(){var maximizedItemOverlay=$("<div>").addClass("ui-overlay maximized-item-overlay"),overlayWidget=$("<div>").addClass("ui-widget-overlay"),overlayUnmaximizeButton=$("<div>"+I18n.t("javascripts.item-maximizer.exit",{defaultValue:"EXIT FULL SCREEN"})+"</div>").addClass("unmaximize-button").attr("id","unmaximize-button").button({icons:{primary:"ui-icon-closethick"},text:!1}).click(this.unmaximizeItemSize.bind(this));return maximizedItemOverlay.append(overlayWidget),maximizedItemOverlay.append(overlayUnmaximizeButton),$(document.body).append(maximizedItemOverlay)},maximizeItemSize:function(e){e.preventDefault(),$(document).scrollTop(0),this.renderMaximizedItemOverlay(),this.containerDiv.$domElt.addClass("maximized"),$(document.body).addClass("maximized"),this.itemDiv.fitInto(this.containerDiv,0,60)},unmaximizeItemSize:function(e){e.preventDefault(),$(document.body).removeClass("maximized"),this.containerDiv.$domElt.removeClass("maximized"),$(".maximized-item-overlay").remove();var newSize={width:this.itemDiv.initialFitWidth,height:this.itemDiv.initialFitHeight};this.itemDiv.changeSizeWith(newSize),this.itemView.dealWithContainerSize(),this.containerDiv.setHeight(newSize.height)}},ItemResizer={init:function(itemView){this.itemView=itemView,this.itemDiv=itemView.itemDiv,this.containerDiv=itemView.containerDiv,this.$resizerContainer=$("#item-resizer"),this.$sliderElement=this.$resizerContainer.find("#item-resizer-slider"),$("#adjust-button").click(this.adjustItemSize.bind(this)),$("#item-resizer-remove-adjust-button").click(this.removeAdjustItemSize.bind(this));var sliderAttributes;this.$resizerContainer.fadeIn(),sliderAttributes={min:+this.$sliderElement.data("min"),max:98*$(window).width()/100,value:+this.itemDiv.initialFitWidth,step:+this.$sliderElement.data("step")},this.$sliderElement.slider(sliderAttributes),this.$sliderElement.bind("slide slidechange",this.onSliderChange.bind(this)),this.$resizerContainer.find(".item-resizer-resize-button").click(this.zoomOnItem.bind(this)),this.$resizerContainer.find("#item-resizer-reset-size-button").click(this.resetItemSize.bind(this))},adjustItemSize:function(e){e.preventDefault(),$(".adjust-layer").toggle(),$(window).scrollTop($("nav.navbar").innerHeight()-$("#item-resizer").innerHeight()-35)},removeAdjustItemSize:function(e){e.preventDefault(),$(".adjust-layer").hide()},onSliderChange:function(event,ui){var step=this.$sliderElement.slider("option","step"),newWidth=ui.value-1,newHeight=newWidth/this.itemDiv.initialFitRatio,newSize={width:newWidth,height:newHeight};if(newWidth!=this.itemDiv.currentWidth()){this.itemDiv.changeSizeWith(newSize),this.itemView.dealWithContainerSize(),this.containerDiv.setHeight(newSize.height);var sizeInPercents=Math.round(newWidth/this.itemDiv.initialFitWidth*100);this.$resizerContainer.find("#item-resizer-label").find("span").text(sizeInPercents),this.$resizerContainer.find("#item-resizer-reset-size-button").css("display",Math.abs(newWidth-this.itemDiv.initialFitWidth)<step?"none":"inline")}},resetItemSize:function(e){e.preventDefault(),this.$sliderElement.slider("value",this.itemDiv.initialFitWidth)},zoomOnItem:function(e){e.preventDefault();var difference=10*-this.$sliderElement.slider("option","step");"up"===$(e.currentTarget).data("direction")&&(difference=-difference),this.$sliderElement.slider("value",+this.$sliderElement.slider("value")+difference)}},ItemView={itemDiv:null,containerDiv:null,itemRenderingInitialWidth:null,bodyInitialWidth:null,adInit:!0,init:function(){this.bodyInitialWidth=$("body .container").width(),this.itemRenderingInitialWidth=$(".item-rendering").width(),this.containerDiv=new ContainerDiv("#item-container"),this.itemDiv=new ItemDiv("#item-container"),this.itemDiv.initFitSize({}),this.dealWithSize(),ItemMaximizer.init(this),ItemResizer.init(this),this.saveToLibrary()},dealWithSize:function(){this.itemDiv.maximize?(this.dealWithSmartFrameContainerSize(),this.itemDiv.fitInto(this.containerDiv)):this.dealWithContainerSize()},dealWithContainerSize:function(){this.itemDiv.currentWidth()<=this.itemRenderingInitialWidth?($(".item-rendering").removeClass("wider"),$("body").removeClass("full-width")):($(".item-rendering").addClass("wider"),this.itemDiv.currentWidth()>this.bodyInitialWidth?$("body").addClass("full-width"):$("body").removeClass("full-width")),$(document).trigger("itemResizeDone")},dealWithSmartFrameContainerSize:function(){$(".item-rendering").addClass("wider"),$("body").addClass("full-width"),this.containerDiv.setHeight(98*$(window).height()/100)},saveToLibrary:function(){var itemId=$("body").data("item-id"),cookieName=$(".animations-active").length?"watched_videos_ids":"played_games_ids";null!=itemId&&new LibraryCookieSetter(cookieName,itemId)}},IdnetAchievements={init:function(){$(document).ready(function(){$achitemPopup=$("#achitem-popup"),$achitemTitle=$("#achitem-title"),$achitemDesc=$("#achitem-desc"),$achitemDifficulty=$("#achitem-difficulty"),$achitemAwarded=$("#achitem-awarded"),$(document).on({mouseenter:function(){windowWidth=$(window).width();var $this=$(this),$position=$this.position();return $achitemTitle.html($this.data("achtitle")),$achitemDesc.html($this.data("achdesc")),$achitemDifficulty.html($this.data("achdifficulty")),$achitemAwarded.html("Awarded: "+$this.data("achawarded")+" players"),windowWidth-$position.left<194&&(position.left=windowWidth-194),$achitemPopup.css({top:$position.top+"px",left:$position.left+"px"}).show(),!1},mouseleave:function(){return console.log("== hereOut"),$achitemPopup.hide(),!1}},".achitem")}),$("#idnet-achievements").each(function(){var $this=$(this),source=$("#achievements-template",$this).html(),template=Handlebars.compile(source),$pagination=$("#idnet-achievements-pagination"),appId=$("body").data("idnet-app-id"),postData={appid:appId},achievements=[],maxPage=0,perPage=16,ajaxTriggered=!1,timeago=function(){$this.find("abbr.timeago").timeago()},getPlayerId=function(){return jQuery.ajax({xhrFields:{withCredentials:!0},url:window.appInfo.accountServiceApiUrls.userAutologinUrl.replace(":app_id",appId)})},getPlaytomicData=function(callback){ID.GameAPI.Achievements.listCustom(postData,callback)},clickOnPageLink=function(event,page){event.preventDefault(),loadPage(page)},loadAchievements=function(){getPlayerId().success(function(playerData){$(".achievements-loader").remove(),"user"in playerData&&(postData.playerid=playerData.user.pid),getPlaytomicData(function(achievementsData){if(!(achievementsData.success&&"achievements"in achievementsData))return $(".idnet-achievements").hide(),!1;achievements=achievementsData.achievements,orderAchievements(),maxPage=achievements.length>1?Math.ceil(achievements.length/perPage):1,maxPage>1&&$pagination.twbsPagination({first:I18n.t("js.pagination.first",{defaultValue:"First"}),prev:I18n.t("js.pagination.previous",{defaultValue:"Previous"}),next:I18n.t("js.pagination.next",{defaultValue:"Next"}),last:I18n.t("js.pagination.last",{defaultValue:"Last"}),totalPages:maxPage,visiblePages:13,onPageClick:clickOnPageLink}),$this.html(""),jQuery.each(achievements,function(i,e){i<=perPage-1&&$this.append(template(e))}),timeago()}),timeago()})},orderAchievements=function(){var userAchievements=[],unawardedAchievements=[];jQuery.each(achievements,function(i,e){"player"in e?userAchievements.push(e):unawardedAchievements.push(e)}),achievements=userAchievements.concat(unawardedAchievements)},getPaginatedAchievements=function(page){return achievements.slice(perPage*(page-1),perPage*page)},renderPaginatedAchievements=function(page){var paginatedAchievements=getPaginatedAchievements(page);jQuery.each(paginatedAchievements,function(i,e){$this.append(template(e))})},loadPage=function(page){0==achievements.length?loadAchievements():($this.html(""),renderPaginatedAchievements(page))};$(".idnet-achievements").visible(!0)?loadPage(1):$(document).on("scroll",function(){$(".idnet-achievements").visible(!0)&&0==ajaxTriggered&&(loadPage(1),ajaxTriggered=!0)})})}},AvatarChooser=function(){var selected=null,callback=null,pid=null,modalInitialized=!1,set=1,init=function(cb){if(callback=cb,pid=Cookies.get("user_pid"),-1===$(".avatar").prop("src").indexOf("default")||!pid)return callback();$.ajax({url:window.appInfo.accountServiceApiUrls.profileJsonUrl.replace(":uid",pid),timeout:1e4}).done(function(data){data&&data.profile&&1!=data.profile.avatar_present?display():callback()}).fail(function(){callback()})},display=function(){modalInitialized||initModal(),$(".choose-avatar-popup").find(".error").hide(),$(".choose-avatar-popup").show()},initModal=function(){initCloseButton(),initSelectableAvatars(),initRefreshButton(),$(".btn-confirm").click(chooseAvatar),$(".btn-upload").click(uploadAvatar),modalInitialized=!0},initSelectableAvatars=function(){$(".avatar-preset-wrapper").bind("click",function(){var clicked=$(this).data("id");selected==clicked?unselect():clicked&&select(clicked,$(this))}),$(".set-"+set).show()},unselect=function(){selected=null,$(".btn-confirm").addClass("disabled"),$(".avatar-preset-wrapper").removeClass("active"),$(".avatar-preset-wrapper").removeClass("dimmed")},select=function(selection,$el){selected=selection,$(".avatar-preset-wrapper").removeClass("active"),$el.addClass("active"),$el.removeClass("dimmed"),$(".avatar-preset-wrapper:not(.active)").addClass("dimmed"),$(".btn-confirm").removeClass("disabled")},initCloseButton=function(){$(".choose-avatar-popup .btn-close").click(function(e){e.preventDefault(),$(".choose-avatar-popup").hide()})},initRefreshButton=function(){$(".choose-avatar-popup .btn-animation").click(function(){$(this).hide(),$(".choose-avatar-popup .btn-refresh").show(),$(".choose-avatar-popup .btn-refresh").click()}),$(".choose-avatar-popup .btn-refresh").click(showNextSet)},showNextSet=function(){unselect(),$(".set-"+set).hide(),set=set<9?set+1:1,$(".set-"+set).fadeIn()},chooseAvatar=function(e){e.preventDefault(),selected&&$.ajax({url:"/ajax/choose_avatar_preset",data:{choise:selected},method:"POST",timeout:1e4}).done(function(data){1==data.success&&(callback(),$(".choose-avatar-popup").hide())}).fail(function(){$(".choose-avatar-popup").find(".error").show()})},uploadAvatar=function(e){e.preventDefault();var url=window.appInfo.accountServiceApiUrls.profilePictureUrl.replace(":uid",pid);window.open(url,"_blank"),window.focus(),$(".choose-avatar-popup").hide(),callback()};return{init:init}}(),_Comments,bind=function(fn,me){return function(){return fn.apply(me,arguments)}};window.Comments=function(){function Comments(){}var _instance;return _instance=void 0,Comments.init=function(){return null!=_instance?_instance:_instance=new _Comments},Comments.instance=Comments.init,Comments}(),_Comments=function(){function _Comments(){this.hideErrorMessageContainer=bind(this.hideErrorMessageContainer,this),this.showErrorMessageContainer=bind(this.showErrorMessageContainer,this),this.hideSuccessMessageContainer=bind(this.hideSuccessMessageContainer,this),this.showSuccessMessageContainer=bind(this.showSuccessMessageContainer,this),this.errorMessageContainer=bind(this.errorMessageContainer,this),this.successMessageContainer=bind(this.successMessageContainer,this),this.commentFormContainer=bind(this.commentFormContainer,this),this.setTimerToHideMessage=bind(this.setTimerToHideMessage,this),this.showErrorMessage=bind(this.showErrorMessage,this),this.showSuccessMessage=bind(this.showSuccessMessage,this),this.disableForm=bind(this.disableForm,this),this.enableForm=bind(this.enableForm,this),this.onCommentSubmitError=bind(this.onCommentSubmitError,this),this.onCommentSubmitSuccess=bind(this.onCommentSubmitSuccess,this),this.onBeforeSend=bind(this.onBeforeSend,this),this.onUserInfoReady=bind(this.onUserInfoReady,this),this.onSubmitClick=bind(this.onSubmitClick,this),this.registerHandlers=bind(this.registerHandlers,this),this.registerHandlers()}return _Comments.prototype.DEFAULT_ERROR_MESSAGE=I18n.t("views.items.show.comment-error",{defaultValue:"Unexpected error occurred, please try again."}),_Comments.prototype.registerHandlers=function(){return $(document).bind("user-info-ready",this.onUserInfoReady),this.commentFormContainer().find(".idnet-comments-form").on("ajax:beforeSend",this.onBeforeSend).on("ajax:success",this.onCommentSubmitSuccess).on("ajax:error",this.onCommentSubmitError),$("#submit-comment").click(this.onSubmitClick)},_Comments.prototype.onSubmitClick=function(e){if(e.preventDefault(),$("#idnet-comment-text").val())return AvatarChooser.init(function(){return $(".idnet-comments-form").submit()})},_Comments.prototype.onUserInfoReady=function(){if("true"===Cookies.get("access_token")&&"true"===Cookies.get("logged_in"))return this.commentFormContainer().find(".login-to-comment").remove(),this.commentFormContainer().find(".post-comment-table").show(),this.commentFormContainer().find(".idnet-comment-text").attr("placeholder",I18n.t("views.items.show.comment-placeholder",{defaultValue:"Input your comment here"})),this.enableForm()},_Comments.prototype.onBeforeSend=function(){return this.disableForm(),!0},_Comments.prototype.onCommentSubmitSuccess=function(event,text){return $("#idnet-comments").trigger("refresh"),$(".comments-counter").html(parseInt($(".comments-counter").html())+1),this.showSuccessMessage(text),this.enableForm({clear:!0})},_Comments.prototype.onCommentSubmitError=function(event,xhr){return"You've already submitted a comment recently"==xhr.responseText?(this.showErrorMessage(I18n.t("views.items.show.comment-frequency",{defaultValue:"Please wait to post a comment again"})),this.enableForm({focus:!0})):(this.showErrorMessage(403===xhr.status&&$.trim(xhr.responseText).length>0?xhr.responseText:this.DEFAULT_ERROR_MESSAGE),this.enableForm({focus:!0}))},_Comments.prototype.enableForm=function(options){var comment_message_textarea;return null==options&&(options={}),comment_message_textarea=this.commentFormContainer().find(".idnet-comment-text"),!0===options.clear&&comment_message_textarea.val(""),comment_message_textarea.removeAttr("disabled"),!0===options.focus&&comment_message_textarea.focus(),this.commentFormContainer().find(".comment-button").removeAttr("disabled")},_Comments.prototype.disableForm=function(){return this.commentFormContainer().find(".idnet-comment-text").attr("disabled","disabled"),this.commentFormContainer().find(".comment-button").attr("disabled","disabled")},_Comments.prototype.showSuccessMessage=function(message){return this.hideErrorMessageContainer(),this.successMessageContainer().children("span").html(message),this.showSuccessMessageContainer(),this.setTimerToHideMessage()},_Comments.prototype.showErrorMessage=function(message){return this.hideSuccessMessageContainer(),this.errorMessageContainer().children("span").html(message),this.showErrorMessageContainer(),this.setTimerToHideMessage()},_Comments.prototype.setTimerToHideMessage=function(){return this.message_hiding_timeout&&clearTimeout(this.message_hiding_timeout),this.message_hiding_timeout=setTimeout(function(_this){return function(){return _this.hideSuccessMessageContainer(),_this.hideErrorMessageContainer()}}(this),1e4)},_Comments.prototype.commentFormContainer=function(){return this.comments_form_container||(this.comments_form_container=$(".post-comment-container"))},_Comments.prototype.successMessageContainer=function(){return this.success_message_container||(this.success_message_container=this.commentFormContainer().find(".post-comment-message-success"))},_Comments.prototype.errorMessageContainer=function(){return this.error_message_container||(this.error_message_container=this.commentFormContainer().find(".post-comment-message-error"))},_Comments.prototype.showSuccessMessageContainer=function(){return this.successMessageContainer().removeClass("very-hidden").removeClass("hidden","fast")},_Comments.prototype.hideSuccessMessageContainer=function(){return this.successMessageContainer().addClass("hidden","fast",function(){return $(this).addClass("very-hidden")})},_Comments.prototype.showErrorMessageContainer=function(){return this.errorMessageContainer().removeClass("very-hidden").removeClass("hidden","fast")},_Comments.prototype.hideErrorMessageContainer=function(){return this.errorMessageContainer().addClass("hidden","fast",function(){return $(this).addClass("very-hidden")})},_Comments}();var IdnetComments={init:function(){$("#idnet-comments").each(function(){function tryToLoadFirstPage(){$this.visible(!0)?loadPage(1):setTimeout(tryToLoadFirstPage,50)}var $this=$(this),url=($this.data("idnet-comments-locale-script"),$this.data("idnet-comments-url")),source=$("#comment-template",$this).html(),template=Handlebars.compile(source),$pagination=$("#idnet-comments-pagination"),myCommentsUrl=function(){return $this.data("idnet-user-comments-url").replace(":id",Cookies.get("user_pid"))},timeago=function(){$this.find(".timeago").timeago()},clickOnPageLink=function(event,page){event.preventDefault(),loadPage(page)},loadPage=function(page){jQuery.get(url,{page:page},function(data){1==page&&Cookies.get("user_pid")?jQuery.get(myCommentsUrl(),renderComments(data)):renderComments(data)()})},renderComments=function(data){return function(myCommentsData){$(".comments-loader").remove(),data=ensureJson(data),myCommentsData=ensureJson(myCommentsData)
;var maxPage=data.pages_count>1?data.pages_count:1;maxPage>1&&($pagination.show(),$pagination.twbsPagination({first:I18n.t("js.pagination.first",{defaultValue:"First"}),prev:I18n.t("js.pagination.previous",{defaultValue:"Previous"}),next:I18n.t("js.pagination.next",{defaultValue:"Next"}),last:I18n.t("js.pagination.last",{defaultValue:"Last"}),totalPages:maxPage,visiblePages:8,onPageClick:clickOnPageLink}));var comments=data.results;myCommentsData&&myCommentsData.results.length&&(comments=prependMyComments(comments,myCommentsData)),$(".comments-counter").html(data.count),$this.empty().append($.map(comments,function(e){return e.message=decodeHtml(e.message),e.nickname?template(e):null})),timeago()}},prependMyComments=function(comments,myCommentsData){var existing=$.map(comments,function(e){return e._id});return $.each(myCommentsData.results.reverse(),function(i,e){-1==existing.indexOf(e._id)&&comments.unshift(e)}),comments},ensureJson=function(data){if("string"==typeof data)try{return jQuery.parseJSON(data)}catch(e){console.log("Failed to parse JSON",e,data)}return data};tryToLoadFirstPage(),$this.on("refresh",function(){loadPage(1)})})},dealWithSubmitButton:function(){var $comment=$("#idnet-comment-text"),$submit=$("#submit-comment");$submit.focus(function(){$submit.trigger("click")}),$comment.focus(function(){$submit.addClass("pre-active")}),$comment.focusout(function(){$submit.removeClass("pre-active")}),$comment.on("keyup",function(){$(this).val().length>2?($submit.removeAttr("disabled"),$submit.addClass("active")):($submit.attr("disabled","disabled"),$submit.removeClass("active"))})}};$(function(){Comments.init(),IdnetComments.init(),["y8","videotime"].indexOf(appInfo.currentSkin.shortName)>=0&&IdnetComments.dealWithSubmitButton()});var IdnetLeaderboard={init:function(){$("#idnet-leaderboard").each(function(){var table,$this=$(this),source=$("#leaderboard-template",$this).html(),template=Handlebars.compile(source),$pagination=$("#idnet-leaderboard-pagination"),leaderboardApiUrl=$(".profile-info").data("account-leaderboard-api-url"),avatarApiUrl=window.appInfo.accountServiceApiUrls.profileAvatarUrl,loadAvatars=$this.data("load-avatars"),defaultAvatar=$this.data("default-avatar"),appId=$("body").data("idnet-app-id"),leaderboard=[],leaderboardContainer=$(".idnet-leaderboard-body"),maxPage=0,perPage=$this.data("per-page")||10,visiblePages=$this.data("visible-pages")||8,tablePages={},filterOption="alltime",leaderboardType="y8_account",ajaxTriggered=!1,timeago=function(){$this.find("abbr.timeago").timeago()},getTable=function(page,callback){options={appid:appId,table:table,page:page,perpage:perPage,mode:filterOption},ID.GameAPI.Leaderboards.listCustom(options,callback)},getIdnetData=function(page){return data={client_id:appId,page:page,per_page:perPage,period:filterOption},jQuery.ajax({url:leaderboardApiUrl,data:data,type:"GET",contentType:"text/plain",dataType:"json"})},getAvatarData=function(pid){return jQuery.ajax({url:avatarApiUrl.replace(":uid",pid),type:"GET",contentType:"text/plain",dataType:"json"})},userAvatar=function(avatar){return avatar?avatar.replace("large","medium"):defaultAvatar},updateAvatars=function(dom){dom.find(".member").each(function(){var playerid=$(this).data("playerid"),$img=$(this).find("img");getAvatarData(playerid).success(function(data){$img.attr("src",userAvatar(data.profile.avatar))})})},clickOnPageLink=function(event,page){event.preventDefault(),"y8_account"==leaderboardType?paginateIdnetScores(page):"playtomic"==leaderboardType&&paginatePlaytomicScores(page),updateAvatars($(".idnet-leaderboard-body"))},loadLeaderboard=function(){options={appid:appId,page:1,perpage:perPage},ID.GameAPI.Leaderboards.tables(options,function(tablesData){if($(".leaderboard-loader").remove(),!tablesData.success)return $(".idnet-leaderboard").hide(),$(".show-block-leaderboard").hide(),!1;"tables"in tablesData&&0==tablesData.tables.length?(leaderboardType="y8_account",getIdnetData(1).success(function(leaderboardData){if(0==leaderboardData.data.length)return!1;cacheTable(1,leaderboardData),maxPage=leaderboardData.data[0].numscores>1?Math.ceil(leaderboardData.data[0].numscores/perPage):1,jQuery.each(leaderboardData.data,function(i,e){e.playerid=e.user.id,e.rank=i+1,e.playername=e.user.nickname,e.points=e.score.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e.imageurl=defaultAvatar,leaderboard.push(e),i<=4&&$this.append(template(e))}),filterIdnetScores(),loadAvatars&&updateAvatars($("#idnet-leaderboard")),timeago()})):(leaderboardType="playtomic",table=tablesData.tables[0],getTable(1,function(leaderboardData){if(!leaderboardData.success)return!1;cacheTable(1,leaderboardData),maxPage=10,jQuery.each(leaderboardData.scores,function(i,e){e.points>999999999?(e.points=e.points/1e6^0,e.points=e.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"m"):e.points>999999?(e.points=e.points/1e3^0,e.points=e.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")+"k"):e.points=e.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e.imageurl=defaultAvatar,leaderboard.push(e),i<=4&&$this.append(template(e))}),filterPlaytomicScores(),loadAvatars&&updateAvatars($("#idnet-leaderboard")),timeago()})),timeago()})},resetPagination=function(){$pagination.empty(),$pagination.removeData("twbs-pagination"),$pagination.unbind("page")},filterIdnetScores=function(){"alltime"==filterOption?filterOption="alltime":"last30days"==filterOption?filterOption="month":"last7days"==filterOption?filterOption="week":"today"==filterOption?filterOption="day":"newest"==filterOption&&(filterOption="newest"),getIdnetCachedTable(1,function(leaderboardData){if(0==leaderboardData.length)return!1;cacheTable(1,leaderboardData),formatAndAppendIdnetScores(1,leaderboardData),maxPage=10,$pagination.twbsPagination({first:I18n.t("js.pagination.first",{defaultValue:"First"}),prev:I18n.t("js.pagination.previous",{defaultValue:"Previous"}),next:I18n.t("js.pagination.next",{defaultValue:"Next"}),last:I18n.t("js.pagination.last",{defaultValue:"Last"}),totalPages:maxPage,visiblePages:visiblePages,onPageClick:clickOnPageLink}),timeago()})},filterPlaytomicScores=function(){getPlaytomicCachedTable(1,function(leaderboardData){if(!leaderboardData.success)return!1;cacheTable(1,leaderboardData),formatAndAppendPlaytomicScores(leaderboardData),maxPage=10,$pagination.twbsPagination({first:I18n.t("js.pagination.first",{defaultValue:"First"}),prev:I18n.t("js.pagination.previous",{defaultValue:"Previous"}),next:I18n.t("js.pagination.next",{defaultValue:"Next"}),last:I18n.t("js.pagination.last",{defaultValue:"Last"}),totalPages:maxPage,visiblePages:visiblePages,onPageClick:clickOnPageLink}),timeago()})},paginatePlaytomicScores=function(page){getPlaytomicCachedTable(page,function(leaderboardData){if(!leaderboardData.success)return!1;cacheTable(page,leaderboardData),formatAndAppendPlaytomicScores(leaderboardData),timeago()})},paginateIdnetScores=function(page){getIdnetCachedTable(page,function(leaderboardData){if(0==leaderboardData.length)return!1;cacheTable(page,leaderboardData),formatAndAppendIdnetScores(page,leaderboardData),timeago()})},formatAndAppendPlaytomicScores=function(leaderboardData){leaderboard=[],jQuery.each(leaderboardData.scores,function(i,e){e.points=e.points.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e.imageurl=defaultAvatar,leaderboard.push(e)}),leaderboardContainer.html(""),jQuery.each(leaderboard,function(i,e){leaderboardContainer.append(template(e))})},formatAndAppendIdnetScores=function(page,leaderboardData){leaderboard=[],jQuery.each(leaderboardData.data,function(i,e){e.playerid=e.user.id,e.rank=perPage*(page-1)+i+1,e.playername=e.user.nickname,e.points=e.score.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),e.imageurl=defaultAvatar,leaderboard.push(e)}),leaderboardContainer.html(""),jQuery.each(leaderboard,function(i,e){leaderboardContainer.append(template(e))})},getPlaytomicCachedTable=function(page,callback){var data=tablePages[filterOption+":"+page];data&&0!=data.length?callback(data):getTable(page,callback)},getIdnetCachedTable=function(page,callback){var data=tablePages[filterOption+":"+page];data&&0!=data.length?callback(data):getIdnetData(page).success(callback)},cacheTable=function(page,data){tablePages[filterOption+":"+page]=data};$(".leaderboard-filter-box select").change(function(){filterOption=$(this).children("option:selected").val(),resetPagination(),"y8_account"==leaderboardType?filterIdnetScores():"playtomic"==leaderboardType&&filterPlaytomicScores()}),$(".idnet-leaderboard-popup-toggle").click(function(e){e.preventDefault(),e.stopPropagation(),$(".idnet-leaderboard-popup").visible(!0)&&updateAvatars($(".idnet-leaderboard-body")),$(".idnet-leaderboard-popup").fadeToggle()}),$(".idnet-leaderboard-popup, .close-leaderboard").click(function(){$(".idnet-leaderboard-popup").fadeOut()}),$(".idnet-leaderboard-popup-inner").click(function(e){e.stopPropagation()}),$(".idnet-leaderboard").visible(!0)?loadLeaderboard():$(document).on("scroll",function(){$(".idnet-leaderboard").visible(!0)&&0==ajaxTriggered&&(loadLeaderboard(),ajaxTriggered=!0)})})},dealtWithIdnetPanel:function(){$(".toogle-idnet-panel").click(function(e){if(!$("#points-frame").attr("src")){var leaderboardPointsUrl=$(".profile-info").data("account-leaderboard-points-url");$("#points-frame").attr("src",leaderboardPointsUrl)}e.preventDefault(),e.stopPropagation(),$(".idnet-points-modal").fadeToggle()}),$(".idnet-points-modal .close-modal").click(function(e){$(".idnet-points-modal").fadeOut(),e.preventDefault()})}};window.IdnetLeaderboard=IdnetLeaderboard,function(global,$){"use strict";var elems=Object.defineProperties({},{container:{get:function(){return delete this.container,this.container=$("#voting-buttons-container")},configurable:!0,enumerable:!0},buttons:{get:function(){return delete this.buttons,this.buttons=this.container.find("button")},configurable:!0,enumerable:!0}});global.VotingButtons={show:function(){var _ref=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],_ref$animated=_ref.animated,animated=_ref$animated!==undefined&&_ref$animated;this.enable(),animated?elems.container.slideDown("fast"):elems.container.show()},hide:function(){var _ref2=arguments.length<=0||arguments[0]===undefined?{}:arguments[0],_ref2$animated=_ref2.animated;_ref2$animated!==undefined&&_ref2$animated?elems.container.slideUp("fast"):elems.container.hide()},enable:function(){elems.buttons.removeAttr("disabled")},disable:function(){elems.buttons.attr("disabled","disabled")}}}(window,jQuery),function($){"use strict";function checkPrecision(value,minValue,maxValue){return value===minValue?value=minValue:value===maxValue&&(value=maxValue),value}function checkBounds(value,minValue,maxValue){if(!(value>=minValue&&value<=maxValue))throw Error("Invalid Rating, expected value between "+minValue+" and "+maxValue);return value}function getInstance(node,collection){var instance;return $.each(collection,function(){if(node===this.node)return instance=this,!1}),instance}function deleteInstance(node,collection){return $.each(collection,function(index){if(node===this.node){var firstPart=collection.slice(0,index),secondPart=collection.slice(index+1,collection.length);return collection=firstPart.concat(secondPart),!1}}),collection}function isDefined(value){return void 0!==value}function RateYo($node,options){function showRating(ratingVal){isDefined(ratingVal)||(ratingVal=options.rating);var numStarsToShow=ratingVal/step,percent=numStarsToShow*percentOfStar;numStarsToShow>1&&(percent+=(Math.ceil(numStarsToShow)-1)*percentOfSpacing),$ratedGroup.css("width",percent+"%")}function setContainerWidth(){containerWidth=starWidth*options.numStars,containerWidth+=spacing*(options.numStars-1),percentOfStar=starWidth/containerWidth*100,percentOfSpacing=spacing/containerWidth*100,$node.width(containerWidth),showRating()}function setStarWidth(newWidth){return isDefined(newWidth)?(options.starWidth=options.starHeight=newWidth,starWidth=parseFloat(options.starWidth.replace("px","")),$normalGroup.find("svg").attr({width:options.starWidth,height:options.starHeight}),$ratedGroup.find("svg").attr({width:options.starWidth,height:options.starHeight}),setContainerWidth(),$node):options.starWidth}function setSpacing(newSpacing){return isDefined(newSpacing)?(options.spacing=newSpacing,spacing=parseFloat(options.spacing.replace("px","")),$normalGroup.find("svg:not(:first-child)").css({"margin-left":newSpacing}),$ratedGroup.find("svg:not(:first-child)").css({"margin-left":newSpacing}),setContainerWidth(),$node):options.spacing}function setNormalFill(newFill){return isDefined(newFill)?(options.normalFill=newFill,$normalGroup.find("svg").attr({fill:options.normalFill}),$node):options.normalFill}function setRatedFill(newFill){return isDefined(newFill)?(options.ratedFill=newFill,$ratedGroup.find("svg").attr({fill:options.ratedFill}),$node):options.ratedFill}function setNumStars(newValue){if(!isDefined(newValue))return options.numStars;options.numStars=newValue,step=options.maxValue/options.numStars,$normalGroup.empty(),$ratedGroup.empty();for(var i=0;i<options.numStars;i++)$normalGroup.append($(options.starSvgIcon||BASICSTAR)),$ratedGroup.append($(options.starSvgIcon||BASICSTAR));return setStarWidth(options.starWidth),setRatedFill(options.ratedFill),setNormalFill(options.normalFill),setSpacing(options.spacing),showRating(),$node}function setMaxValue(newValue){return isDefined(newValue)?(options.maxValue=newValue,step=options.maxValue/options.numStars,options.rating>newValue&&setRating(newValue),showRating(),$node):options.maxValue}function setPrecision(newValue){return isDefined(newValue)?(options.precision=newValue,showRating(),$node):options.precision}function setHalfStar(newValue){return isDefined(newValue)?(options.halfStar=newValue,$node):options.halfStar}function setFullStar(newValue){return isDefined(newValue)?(options.fullStar=newValue,$node):options.fullStar}function round(value){var remainder=value%step,halfStep=step/2,isHalfStar=options.halfStar,isFullStar=options.fullStar;return isFullStar||isHalfStar?(isFullStar||isHalfStar&&remainder>halfStep?value+=step-remainder:(value-=remainder,remainder>0&&(value+=halfStep)),value):value}function calculateRating(e){var position=$normalGroup.offset(),nodeStartX=position.left,nodeEndX=nodeStartX+$normalGroup.width(),maxValue=options.maxValue,pageX=e.pageX,calculatedRating=0;if(pageX<nodeStartX)calculatedRating=minValue;else if(pageX>nodeEndX)calculatedRating=maxValue;else{var calcPrcnt=(pageX-nodeStartX)/(nodeEndX-nodeStartX);if(spacing>0){calcPrcnt*=100;for(var remPrcnt=calcPrcnt;remPrcnt>0;)remPrcnt>percentOfStar?(calculatedRating+=step,remPrcnt-=percentOfStar+percentOfSpacing):(calculatedRating+=remPrcnt/percentOfStar*step,remPrcnt=0)}else calculatedRating=calcPrcnt*options.maxValue;calculatedRating=round(calculatedRating)}return calculatedRating}function onMouseEnter(e){var rating=calculateRating(e).toFixed(options.precision),maxValue=options.maxValue;rating=checkPrecision(parseFloat(rating),minValue,maxValue),showRating(rating),$node.trigger("rateyo.change",{rating:rating})}function onMouseLeave(){showRating(),$node.trigger("rateyo.change",{rating:options.rating})}function onMouseClick(e){var resultantRating=calculateRating(e).toFixed(options.precision);resultantRating=parseFloat(resultantRating),that.rating(resultantRating)}function onChange(e,data){options.onChange&&"function"==typeof options.onChange&&options.onChange.apply(this,[data.rating,that])}function onSet(e,data){options.onSet&&"function"==typeof options.onSet&&options.onSet.apply(this,[data.rating,that])}function bindEvents(){$node.on("mousemove",onMouseEnter).on("mouseenter",onMouseEnter).on("mouseleave",onMouseLeave).on("click",onMouseClick).on("rateyo.change",onChange).on("rateyo.set",onSet)}function unbindEvents(){$node.off("mousemove",onMouseEnter).off("mouseenter",onMouseEnter).off("mouseleave",onMouseLeave).off("click",onMouseClick).off("rateyo.change",onChange).off("rateyo.set",onSet)}function setReadOnly(newValue){return isDefined(newValue)?(options.readOnly=newValue,$node.attr("readonly",!0),unbindEvents(),newValue||($node.removeAttr("readonly"),bindEvents()),$node):options.readOnly}function setRating(newValue){if(!isDefined(newValue))return options.rating;var rating=newValue,maxValue=options.maxValue;return"string"==typeof rating&&("%"===rating[rating.length-1]&&(rating=rating.substr(0,rating.length-1),maxValue=100,setMaxValue(maxValue)),rating=parseFloat(rating)),checkBounds(rating,minValue,maxValue),rating=parseFloat(rating.toFixed(options.precision)),checkPrecision(parseFloat(rating),minValue,maxValue),options.rating=rating,showRating(),$node.trigger("rateyo.set",{rating:rating}),$node}function setOnSet(method){return isDefined(method)?(options.onSet=method,$node):options.onSet}function setOnChange(method){return isDefined(method)?(options.onChange=method,$node):options.onChange}this.$node=$node,this.node=$node.get(0);var that=this;$node.addClass("jq-ry-container");var step,starWidth,percentOfStar,spacing,percentOfSpacing,containerWidth,$groupWrapper=$("<div/>").addClass("jq-ry-group-wrapper").appendTo($node),$normalGroup=$("<div/>").addClass("jq-ry-normal-group").addClass("jq-ry-group").appendTo($groupWrapper),$ratedGroup=$("<div/>").addClass("jq-ry-rated-group").addClass("jq-ry-group").appendTo($groupWrapper),minValue=0;this.rating=function(newValue){return isDefined(newValue)?(setRating(newValue),$node):options.rating},this.destroy=function(){return options.readOnly||unbindEvents(),RateYo.prototype.collection=deleteInstance($node.get(0),this.collection),$node.removeClass("jq-ry-container").children().remove(),$node},this.method=function(methodName){if(!methodName)throw Error("Method name not specified!");if(!isDefined(this[methodName]))throw Error("Method "+methodName+" doesn't exist!");var args=Array.prototype.slice.apply(arguments,[]),params=args.slice(1);return this[methodName].apply(this,params)},this.option=function(optionName,param){if(!isDefined(optionName))return options;var method;switch(optionName){case"starWidth":method=setStarWidth;break;case"numStars":method=setNumStars;break;case"normalFill":method=setNormalFill;break;case"ratedFill":method=setRatedFill;break;case"maxValue":method=setMaxValue;break;case"precision":method=setPrecision;break;case"rating":method=setRating;break;case"halfStar":method=setHalfStar;break;case"fullStar":method=setFullStar;break;case"readOnly":method=setReadOnly;break;case"spacing":method=setSpacing;break;case"onSet":method=setOnSet;break;case"onChange":method=setOnChange;break;default:throw Error("No such option as "+optionName)}return method(param)},setNumStars(options.numStars),setReadOnly(options.readOnly),this.collection.push(this),this.rating(options.rating)}function _rateYo(options){var rateYoInstances=RateYo.prototype.collection,$nodes=$(this);if(0===$nodes.length)return $nodes;var args=Array.prototype.slice.apply(arguments,[]);if(0===args.length)options=args[0]={};else{if(1!==args.length||"object"!=typeof args[0]){if(args.length>=1&&"string"==typeof args[0]){var methodName=args[0],params=args.slice(1),result=[];return $.each($nodes,function(i,node){var existingInstance=getInstance(node,rateYoInstances);if(!existingInstance)throw Error("Trying to set options before even initialization");var method=existingInstance[methodName];if(!method)throw Error("Method "+methodName+" does not exist!");var returnVal=method.apply(existingInstance,params);result.push(returnVal)}),result=1===result.length?result[0]:$(result)}throw Error("Invalid Arguments")}options=args[0]}return options=$.extend(JSON.parse(JSON.stringify(DEFAULTS)),options),$.each($nodes,function(){if(!getInstance(this,rateYoInstances))return new RateYo($(this),$.extend({},options))})}function rateYo(){return _rateYo.apply(this,Array.prototype.slice.apply(arguments,[]))}var BASICSTAR='<?xml version="1.0" encoding="utf-8"?><svg version="1.1" id="Layer_1"xmlns="http://www.w3.org/2000/svg"viewBox="0 12.705 512 486.59"x="0px" y="0px"xml:space="preserve"><polygon id="star-icon"points="256.814,12.705 317.205,198.566 512.631,198.566 354.529,313.435 414.918,499.295 256.814,384.427 98.713,499.295 159.102,313.435 1,198.566 196.426,198.566 "/></svg>',DEFAULTS={starWidth:"32px",normalFill:"gray",ratedFill:"#f39c12",numStars:5,maxValue:5,precision:1,rating:0,fullStar:!1,halfStar:!1,readOnly:!1,spacing:"0px",onChange:null,onSet:null,starSvgIcon:null};RateYo.prototype.collection=[],window.RateYo=RateYo,$.fn.rateYo=rateYo}(jQuery);var ScreenshotRating=function(){"use strict";var ERROR_NOT_LOGGED_IN_AND_NO_CAPTCHA=1,rate=function(client_id,screenshot_id,rating,captcha_params){captcha_params=captcha_params||[];var params=captcha_params.concat([{name:"id",value:screenshot_id},{name:"client_id",value:client_id},{name:"rating",value:rating}]);params["g-recaptcha-action"]="screenshot",params["g-recaptcha-response"]=window.recaptchaV3Token,storeDataForCaptcha(client_id,screenshot_id,rating),sendRequest(params)},sendRequest=function(params){$.ajax({url:"/ajax/rate_screenshot",type:"POST",data:params,timeout:1e4,success:onRequestSuccess,error:onRequestError})},showMessage=function(element_id){if(element_id){var $element=$("#screenshot-rating-message-"+element_id);$element.length&&($element.fadeIn(),setTimeout(function(){$element.fadeOut()},5e3))}},onRequestSuccess=function(){showMessage("success")},onRequestError=function(request,textStatus){if(400==request.status){var response=$.parseJSON(request.responseText);if(response.error.code)switch(response.error.code){case ERROR_NOT_LOGGED_IN_AND_NO_CAPTCHA:showCaptcha();break;default:console.log("Unknown error "+response.error.code)}}else showMessage("unknown-error"),"timeout"===textStatus?console.log("Screenshot rating timeout error. Is Y8 Account up?"):console.log("Failed to rate screenshot: ",textStatus)},showCaptcha=function(){$("#screenshot-rating-captcha-container > form").submit(function(e){e.preventDefault()}),window.RecaptchaV3.triggerAction("screenshot","inline-badge2");var captcha_container=$("#screenshot-rating-captcha-container");captcha_container.show().parents(".display-with-screenshot-rating-captcha").show(),captcha_container.centerWindow(),captcha_container.children("form").unbind("submit").submit(onCaptchaSubmit),captcha_container.find("#screenshot-rating-captcha-button-cancel").unbind("click").click(function(){return hideCaptcha(),!1})},hideCaptcha=function(callback){$("#screenshot-rating-captcha-container").is(":visible")&&$("#screenshot-rating-captcha-container").slideUp("fast",function(){$(this).parents(".display-with-screenshot-rating-captcha").hide(),window.RecaptchaV3.reset(),callback&&callback()})},onCaptchaSubmit=function(){var captcha_form=$("#screenshot-rating-captcha-container > form"),screenshot_id=captcha_form.data("screenshot_id"),client_id=captcha_form.data("client_id"),rating=captcha_form.data("rating"),captcha_inputs=captcha_form.serializeArray(),captchaSolved=window.recaptchaV3Token;return hideCaptcha(function(){captchaSolved?rate(client_id,screenshot_id,rating,captcha_inputs):showCaptcha()}),!1},storeDataForCaptcha=function(client_id,screenshot_id,rating){$("#screenshot-rating-captcha-container > form").data({screenshot_id:screenshot_id,client_id:client_id,rating:rating})};return{rate:rate}}();window.ScreenshotRating=ScreenshotRating;var IdnetScreenshots=function(){var $container,url,template,init=function(){"use strict";Handlebars.registerHelper("contextAsJson",function(){return JSON.stringify(this)}),$(".idnet-screenshots").each(function(){function tryToLoadScreenshots(){$container.visible(!0)?loadScreenshots():setTimeout(tryToLoadScreenshots,50)}$container=$(this),url=$container.data("idnet-screenshots-url");var source=$("#screenshot-template",$container).html();template=Handlebars.compile(source),tryToLoadScreenshots()})},initForProfile=function(){$(".screenshot").click(openScreenshot).lazyload({container:$(".screenshots-list"),effect:"fadeIn"}),$(".enlarged-screenshot-container").click(closeScreenshot),$(".enlarged-screenshot-close").click(closeScreenshot)},loadScreenshots=function(){$.get(url,renderScreenshots).fail(function(){$(".screenshots-loader").fadeOut(),$container.empty(),$container.parent().hide(),console.log("Failed to load Y8 Account screenshots")})},renderScreenshots=function(data){$(".screenshots-loader").fadeOut(),data=ensureParsed(data),$container.html(""),data&&data.length?$.each(data,function(i,screenshot){$container.append(template(screenshot)),initRateyo(screenshot,"#rateyo-")}):$container.parent().hide(),$(".screenshot-thumb").click(openScreenshot).lazyload({container:$(".idnet-screenshots"),effect:"fadeIn"}),$(".enlarged-screenshot-container").click(closeScreenshot),$(".enlarged-screenshot-close").click(closeScreenshot)},openScreenshot=function(){var screenshot=$(this).data("screenshot");$(".screenshot-table").hide(function(){var $this=$(this);$(".enlarged-screenshot-container").fadeIn(),$(".enlarged-screenshot").attr({src:screenshot.url}).load(function(){var source=$("#enlarged-screenshot-template").html(),template=Handlebars.compile(source),$info=$this.find(".screenshot-info");$info.click(function(event){event.stopPropagation()}),$info.empty(),$info.append(template(screenshot)),initRateyo(screenshot,"#enlarged-rateyo-"),$this.fadeIn()})})},closeScreenshot=function(){$(".enlarged-screenshot-container").fadeOut(function(){var $wrapper=$(".keycaptcha-wrapper");$wrapper.data("isDetached")&&($(".display-with-screenshot-rating-captcha").hide(),$(".keycaptcha-wrapper").detach().appendTo(".keycaptcha-placeholder"),$wrapper.data({isDetached:!1}))})},initRateyo=function(screenshot,idPrefix){var $rateyoDiv=$(idPrefix+screenshot.id);$rateyoDiv.rateYo({rating:screenshot.averageRating,starWidth:"15px",fullStar:!0,normalFill:"#CFDCE8"}),$rateyoDiv.rateYo("option","onSet",function(rating){if("#enlarged-rateyo-"==idPrefix){var $wrapper=$(".keycaptcha-wrapper");$wrapper.detach().appendTo(".enlarged-keycaptcha-placeholder"),$wrapper.data({isDetached:!0})}ScreenshotRating.rate(screenshot.appId,screenshot.id,rating)})},ensureParsed=function(data){if("string"==typeof data)try{data=$.parseJSON(data)}catch(e){}return data};return{init:init,initForProfile:initForProfile}}();$(function(){IdnetScreenshots.init()});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),LibraryCookieSetter=function(){function LibraryCookieSetter(cookieName,itemId){_classCallCheck(this,LibraryCookieSetter),this.skin=window.appInfo.currentSkin,this.cookieDomain="."+this.skin.name,this.cookieExpiration=365,this.maxIds=100,this.allowedSkins=["y8","videotime"],this.cookieName=cookieName,this.removeOldCookie(),this.cookieVal=Cookies.get(cookieName),this.saveGameId(itemId)}return _createClass(LibraryCookieSetter,[{key:"saveGameId",value:function(itemId){if(!(this.allowedSkins.indexOf(this.skin.shortName)<0)){var arrayOfIds=this.cookieVal?JSON.parse(this.cookieVal):[],index=arrayOfIds.indexOf(itemId);index>-1&&arrayOfIds.splice(index,1),arrayOfIds.push(itemId),arrayOfIds.length>this.maxIds&&arrayOfIds.splice(0,1);var result=JSON.stringify(arrayOfIds);Cookies.set(this.cookieName,result,{path:"/",domain:this.cookieDomain,expires:this.cookieExpiration})}}},{key:"removeOldCookie",value:function(){this.skin.is("y8")&&Cookies.remove(this.cookieName,{path:"/",expires:this.cookieExpiration})}}]),LibraryCookieSetter}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),VotingRequest=function(){function VotingRequest(itemId,type,time){var data=arguments.length<=3||arguments[3]===undefined?[]:arguments[3];_classCallCheck(this,VotingRequest),this.itemId=itemId,this.type=type,this.data=data.concat([{name:"item_id",value:itemId},{name:"vote_type",value:type},{name:"vote_time",value:time}]),this.deferred=$.Deferred()}return _createClass(VotingRequest,[{key:"send",value:function(){return $.ajax({url:"/ajax/vote?g-recaptcha-action=vote&g-recaptcha-response="+window.recaptchaV3Token,type:"POST",data:this.data,timeout:1e4,complete:this.complete.bind(this)}),this.deferred.promise()}},{key:"complete",value:function(jqXHR,status){this.deferred["success"==status?"resolve":"reject"](this,jqXHR)}}]),VotingRequest}();!function(global,$){"use strict";function onButtonClick(){var $button=$(this),itemId=$button.data("item-id"),type=$button.hasClass("thumbup")?"up":"down";Voting.vote(itemId,type).always(hideButtons),hidePopupWithDelay()}function hideButtons(){$(".voting-buttons-container-mobile").hide()}function hidePopupWithDelay(){delay(function(){hidePopup()},3e3)}function hidePopup(){$(popup).hide()}function showPopup(){$(popup).show(),$(".voting-result-messages").is(":visible")&&hidePopupWithDelay()}function togglePopup(){$(popup).is(":visible")?hidePopup():showPopup()}function onLinkClick(e){e.preventDefault(),e.stopPropagation(),togglePopup()}var popup=".pop-up.vote-buttons";global.MobileVoting={init:function(){$(".choice",popup).click(onButtonClick),$("a.vote-link").click(onLinkClick)}}}(window,jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global,$){global.VotingCaptcha=function(){function _class(){_classCallCheck(this,_class),this.initDeferred(),this.$container=$("#voting-captcha-container"),this.$form=$("> form",this.$container)}return _createClass(_class,[{key:"initDeferred",value:function(){this.deferred=$.Deferred(),this.deferred.always(this.reset.bind(this))}},{key:"show",value:function(){return this.$container.show().parents(".display-with-voting-captcha").show(),this.$container.centerWindow(),this.triggerRecaptcha(),this.deferred.promise()}},{key:"triggerRecaptcha",value:function(){return regeneratorRuntime.async(function(context$3$0){for(;;)switch(context$3$0.prev=context$3$0.next){case 0:return context$3$0.next=2,regeneratorRuntime.awrap(window.RecaptchaV3.triggerAction("vote"));case 2:this.onSuccess();case 3:case"end":return context$3$0.stop()}},null,this)}},{key:"reset",value:function(){this.initDeferred(),grecaptcha.reset()}},{key:"onSuccess",value:function(){this.hide().then(this.resolve.bind(this))}},{key:"cancel",value:function(){return VotingButtons.show({animated:!0}),this.hide(),this.deferred.reject(),!1}},{key:"hide",value:function(){var deferred=$.Deferred();return this.$container.is(":hidden")?deferred.reject():this.$container.slideUp("fast",function(){$(this).parents(".display-with-voting-captcha").hide(),$(this).closest(".rate").removeClass("active"),deferred.resolve()}),deferred.promise()}},{key:"resolve",value:function(){var data=this.$form.serializeArray();this.deferred.resolve(data)}}]),_class}()}(window,jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function(global,$){"use strict";var successCallbacks=[],failureCallbacks=[],Vote=function(){function Vote(event,direction){_classCallCheck(this,Vote),event.stopPropagation(),event.preventDefault(),this.$button=$(event.currentTarget),this.direction=direction,this.itemId=this.$button.data("item-id")}return _createClass(Vote,[{key:"submit",value:function(){
var data=arguments.length<=0||arguments[0]===undefined?[]:arguments[0];VotingButtons.disable(),Voting.vote(this.itemId,this.direction,data).then(this.onSuccess.bind(this),this.onFailure.bind(this))}},{key:"callCallbacks",value:function(callbacks,args){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=undefined;try{for(var _step,_iterator=callbacks[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.apply(this.$button,args)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator["return"]&&_iterator["return"]()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"onSuccess",value:function(){this.callCallbacks(successCallbacks,arguments)}},{key:"onFailure",value:function(request,errorCode){errorCode==Voting.ERROR_NOT_LOGGED_IN_AND_NO_CAPTCHA?(new VotingCaptcha).show().done(this.submit.bind(this)):this.callCallbacks(failureCallbacks,arguments)}},{key:"saveIdToCookies",value:function(){var scope=$(".animations-active").length?"videos":"games";new LibraryCookieSetter("liked_"+scope+"_ids",this.itemId)}}]),Vote}(),eventHandler={yes:function(event){var vote=new Vote(event,"up");vote.submit(),(new UserInfo).isLoggedIn()||vote.saveIdToCookies(vote.itemId)},no:function(event){new Vote(event,"down").submit()}};global.DesktopVoting={onSuccess:function(callback){successCallbacks.push(callback)},onFailure:function(callback){failureCallbacks.push(callback)},init:function(){Voting.init(),$("#voting-button-yes").click(eventHandler.yes),$("#voting-button-no").click(eventHandler.no),VotingButtons.enable()}}}(window,jQuery),function(global,$){function voteTime(){return($.now()-initialLoadedTime)/1e3}function errorCode(jqXHR){try{if(400!=jqXHR.status)return undefined;return $.parseJSON(jqXHR.responseText).error.code}catch(e){return undefined}}function onRequestSuccess(data){return showMessage("success"),data}function onRequestError(request,jqXHR){var code=errorCode(jqXHR);switch(code){case self.ERROR_NOT_LOGGED_IN_AND_NO_CAPTCHA:break;case self.ERROR_TOO_MANY_VOTES_PER_ITEM:showMessage("no-more");break;case self.ERROR_TOO_MANY_VOTES_PER_SITE:showMessage("max-reached");break;default:showMessage("unknown-error",!0)}return $.Deferred().reject(request,code)}function showMessage(elementId,revealButtonsAfterDelay){if(elementId){$("#voting-message-no-more").hide(),$("#voting-message-max-reached").hide(),$("#voting-message-unknown-error").hide();var element=$("#voting-message-"+elementId);0!==element.length&&(element.fadeIn(),revealButtonsAfterDelay&&setTimeout("VotingButtons.show({ animated: true })",5e3))}}var initialLoadedTime=undefined;global.Voting={ERROR_NOT_LOGGED_IN_AND_NO_CAPTCHA:1,ERROR_TOO_MANY_VOTES_PER_ITEM:2,ERROR_TOO_MANY_VOTES_PER_SITE:3,init:function(){initialLoadedTime=$.now()},vote:function(itemId,type){var data=arguments.length<=2||arguments[2]===undefined?[]:arguments[2],time=voteTime();return new VotingRequest(itemId,type,time,data).send().then(onRequestSuccess,onRequestError)}}}(window,jQuery);var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();!function($){"use strict";function decorateButton(){var $button=$(this),htmlClass=$button.data("success-class");$button.addClass(htmlClass),$(".on-success",$button).show(),$("#success-overlay").show().delay(6e3).fadeOut()}function onFailure(request,errorCode){new Popup(this,errorCode).show()}var _popupKeys,popupKeys=(_popupKeys={},_defineProperty(_popupKeys,Voting.ERROR_TOO_MANY_VOTES_PER_ITEM,"items.voting_main.vote_no_more"),_defineProperty(_popupKeys,Voting.ERROR_TOO_MANY_VOTES_PER_SITE,"views.items.show.max_votes_reached"),_defineProperty(_popupKeys,"default","views.items.show.unknown_voting_error"),_popupKeys),Popup=function(){function Popup($button,errorCode){_classCallCheck(this,Popup),this.$button=$button,this.errorCode=errorCode}return _createClass(Popup,[{key:"position",value:function(){var pos=this.$button.position();return{top:pos.top-10,left:pos.left}}},{key:"show",value:function(){var label=I18n.t(this.key()),position=this.position();$(".vote-popup").show().html(label).css(position).slideDown().delay(8e3).fadeOut()}},{key:"key",value:function(){return popupKeys[this.errorCode]||popupKeys["default"]}}]),Popup}();DesktopVoting.onSuccess(decorateButton),DesktopVoting.onFailure(onFailure)}(jQuery),$(function(){var itemAdLoader=new ItemAdLoader;itemAdLoader.init(),itemAdLoader.manageDisplayAd(),itemAdLoader.manageVideoAd();const widthGame=$(".item-direct-container").width();$(".game-control-container").width(widthGame),void 0===ItemView?ItemResizer.init("#item-container"):(ItemView.init(),ItemEmbed.init()),Tracking.init(),(new ItemFavorite).bindClickActions(),"undefined"!=typeof ShowMoreLess&&ShowMoreLess.init(!0),"undefined"!=typeof VideoPreview&&VideoPreview.init(),DesktopVoting.init(),$(window).on("id.init",function(){return IdnetAchievements.init(),IdnetLeaderboard.init()})});